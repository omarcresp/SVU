{
	"Changes": [
		//Shops
		{
			"LogName": "Shop Aster",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusShopStall01.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 4,
				"Height": 5
			},
			"ToArea": {
				"X": 65,
				"Y": 63,
				"Width": 4,
				"Height": 5
			},
			"When": {
				"DayOfWeek": "Saturday",
			}
		},
		{
			"LogName": "Shop Abdon",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusShopStall02.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 4,
				"Height": 5
			},
			"ToArea": {
				"X": 65,
				"Y": 63,
				"Width": 4,
				"Height": 5
			},
			"When": {
				"DayOfWeek": "Tuesday",
			}
		},
		{
			"LogName": "Shop Helia",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusShopStall03.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 6,
				"Height": 5
			},
			"ToArea": {
				"X": 37,
				"Y": 82,
				"Width": 6,
				"Height": 5
			},
			"When": {
				"DayOfWeek": "Saturday",
			}
		},
		{
			"LogName": "Shop Djamel",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusShopStall04.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 6,
				"Height": 5
			},
			"ToArea": {
				"X": 37,
				"Y": 82,
				"Width": 6,
				"Height": 5
			},
			"When": {
				"DayOfWeek": "Tuesday",
			}
		},
		{
			"LogName": "Shop Naveen",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusShopStall05.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 4,
				"Height": 5
			},
			"ToArea": {
				"X": 21,
				"Y": 62,
				"Width": 4,
				"Height": 5
			},
			"When": {
				"DayOfWeek": "Saturday",
			}
		},
		{
			"LogName": "Shop Mariam",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusShopStall06.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 4,
				"Height": 5
			},
			"ToArea": {
				"X": 21,
				"Y": 62,
				"Width": 4,
				"Height": 5
			},
			"When": {
				"DayOfWeek": "Tuesday",
				"HasSeenEvent: anyPlayer": "Lumisteria.MtVapius_Clearing01Mariam0H",
				"HasConversationTopic: anyPlayer|contains=Lumisteria.MtVapius_MariamEncounter": "false",
			}
		},
		{
			"LogName": "Shop Moira Tuesday",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusShopStall07.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 4,
				"Height": 5
			},
			"ToArea": {
				"X": 35,
				"Y": 71,
				"Width": 4,
				"Height": 5
			},
			"When": {
				"DayOfWeek": "Tuesday",
				"HasSeenEvent: anyPlayer": "Lumisteria.MtVapius_Hamlet_MoiraArrival",
			}
		},
		{
			"LogName": "Shop Moira Saturday",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusShopStall08.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 4,
				"Height": 5
			},
			"ToArea": {
				"X": 35,
				"Y": 71,
				"Width": 4,
				"Height": 5
			},
			"When": {
				"DayOfWeek": "Saturday",
				"HasSeenEvent: anyPlayer": "Lumisteria.MtVapius_Hamlet_MoiraArrival",
			}
		},
		{
			"LogName": "Shop Aloise",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusShopStall09.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 7,
				"Height": 4
			},
			"ToArea": {
				"X": 41,
				"Y": 89,
				"Width": 7,
				"Height": 4
			},
			"When": {
				"Day": "9, 23",
			}
		},
		{
			"LogName": "Shop Maelle",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusShopStall10.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 7,
				"Height": 4
			},
			"ToArea": {
				"X": 41,
				"Y": 89,
				"Width": 7,
				"Height": 4
			},
			"When": {
				"Day": "2",
                "HamletProgress|contains={{Range: 0, 4}}": false
			}
		},
		{
			"LogName": "Shop Felicity",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusShopStall11.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 4,
				"Height": 7
			},
			"ToArea": {
				"X": 42,
				"Y": 87,
				"Width": 4,
				"Height": 7
			},
			"When": {
				"Day": "6",
			}
		},
		//Travelling cart
		{
			"LogName": "Travelling Cart",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusTravellingCart.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 14,
				"Height": 9
			},
			"ToArea": {
				"X": 64,
				"Y": 71,
				"Width": 14,
				"Height": 9
			},
			"When": {
				"DayOfWeek": "Tuesday, Saturday",
			}
		},
		//Trash Cans
		{
			"LogName": "Market Garbage Can",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusMarketGarbageCan.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 1,
				"Height": 2
			},
			"ToArea": {
				"X": 60,
				"Y": 64,
				"Width": 1,
				"Height": 2
			},
			"When": {
				"DayOfWeek": "Tuesday, Saturday",
			}
		},
		//Order Board
		{
			"LogName": "Order Board",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusBoard.tmx",
			"FromArea": { "X": 0, "Y": 0, "Width": 2, "Height": 3 },
			"ToArea": { "X": 43, "Y": 62, "Width": 2, "Height": 3 },
            "When":
            {   
			"HasSeenEvent": "Lumisteria.MtVapius_Hamlet_OrderBoard",
            }
		},
		{
			"LogName": "Inn Bookshelves",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Inn",
			"FromFile": "assets/LumisteriaMtVapiusInnPatch.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 2,
				"Height": 3
			},
			"ToArea": {
				"X": 13,
				"Y": 8,
				"Width": 2,
				"Height": 3
			},
			"Update": "OnLocationChange, OnTimeChange",
			"When": {
				"HasSeenEvent|contains=Lumisteria.MtVapius_Inn_OdalisArrival": "false",
			}
		},
		//Lake Seal
		{
			"LogName": "Lake Seal",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_ForestCrystalLake",
			"FromFile": "assets/LumisteriaMtVapiusForestCrystalLakeSeal.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 1,
				"Height": 2
			},
			"ToArea": {
				"X": 7,
				"Y": 13,
				"Width": 1,
				"Height": 2
			},
			"Update": "OnLocationChange, OnTimeChange",
			"When": {
				"HasFlag|contains=Lumisteria.MtVapius_StoneRemoved_Flag": "false",
			}
		},
		//Random cave warp
		{
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_ForestCaveStar",
			"AddWarps": [
				"5 10 {{Random:Lumisteria.MtVapius_ForestCaveAmber, Lumisteria.MtVapius_ForestCaveMoonPond, Lumisteria.MtVapius_ForestCaveMarsh, Lumisteria.MtVapius_ForestCaveWinterRift|key=Lumisteria.MtVapius_RandomRoom}} 7 37"
			]
		},
		//Amber cave Patch
		{
			"LogName": "Amber cave Patch",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_ForestCaveAmber",
			"FromFile": "assets/LumisteriaMtVapiusForestCaveAmber_PatchRecipe.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 2,
				"Height": 4
			},
			"ToArea": {
				"X": 41,
				"Y": 3,
				"Width": 2,
				"Height": 4
			},
			"When": {
				"HasSeenEvent|contains=Lumisteria.MtVapius_AmberCave_GemPolisherRecipe": "false",
			}
		},
		//Shortcuts Patchs
		{
			"LogName": "Lodge Shortcut Patch",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Lodge",
			"FromFile": "assets/LumisteriaMtVapiusLodgeShortcutPatch.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 2,
				"Height": 6
			},
			"ToArea": {
				"X": 17,
				"Y": 3,
				"Width": 2,
				"Height": 6
			},
			"When": {
				"HasSeenEvent|contains=Lumisteria.MtVapius_Lodge_ShortcutsFixed": "true",
			}
		},
		{
			"LogName": "Lake Shortcut Patch",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_ForestCrystalLake",
			"FromFile": "assets/LumisteriaMtVapiusForestCrystalLakeShortcutPatch.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 2,
				"Height": 6
			},
			"ToArea": {
				"X": 4,
				"Y": 10,
				"Width": 2,
				"Height": 6
			},
			"When": {
				"HasSeenEvent|contains=Lumisteria.MtVapius_Lodge_ShortcutsFixed": "true",
			}
		},
		{
			"LogName": "Hamlet Shortcut Patch",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"FromFile": "assets/LumisteriaMtVapiusHamletShortcutPatch.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 2,
				"Height": 6
			},
			"ToArea": {
				"X": 17,
				"Y": 55,
				"Width": 2,
				"Height": 6
			},
			"When": {
				"HasSeenEvent|contains=Lumisteria.MtVapius_Lodge_ShortcutsFixed": "true",
			}
		},
		{
			"LogName": "Woodland Shortcut Patch",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_ForestTrailWoodland",
			"FromFile": "assets/LumisteriaMtVapiusForestTrailWoodlandShortcutPatch.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 3,
				"Height": 4
			},
			"ToArea": {
				"X": 48,
				"Y": 10,
				"Width": 3,
				"Height": 4
			},
			"When": {
				"HasSeenEvent|contains=Lumisteria.MtVapius_Lodge_ShortcutsFixed": "true",
			}
		},
		//Pond JunimoChest Patch
		
		{
			"LogName": "Pond JunimoChest Patch",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_ForestTrailPond",
			"PatchMode": "Overlay",
			"FromFile": "assets/LumisteriaMtVapiusForestTrailPondPatch.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 1,
				"Height": 2
			},
			"ToArea": {
				"X": 41,
				"Y": 33,
				"Width": 1,
				"Height": 2
			},
			"When": {
                "HasFlag: anyPlayer": "DLX.Bundles.Lumisteria.MtVapius_StartingBundle"
			}
		},
		//Hamlet JunimoChest Patch
		
		{
			"LogName": "Pond JunimoChest Patch",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Hamlet",
			"PatchMode": "Overlay",
			"FromFile": "assets/LumisteriaMtVapiusHamletSatchelPatch.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 1,
				"Height": 2
			},
			"ToArea": {
				"X": 13,
				"Y": 59,
				"Width": 1,
				"Height": 2
			},
			"When": {
                "HasFlag: anyPlayer": "DLX.Bundles.Lumisteria.MtVapius_StartingBundle",
                "HamletProgress|contains={{Range: 0, 2}}": false
			}
		},
		//MuseumPatch
		{
			"LogName": "Museum Addition",
			"Action": "EditMap",
			"Target": "Maps/ArchaeologyHouse",
			"PatchMode": "Overlay",
			"FromFile": "assets/LumisteriaArchaeologyHouse_MapPatch.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 25,
				"Height": 17
			},
			"ToArea": {
				"X": 25,
				"Y": 18,
				"Width": 25,
				"Height": 17
			},
		},
		{
			"LogName": "Museum Addition",
			"Action": "EditMap",
			"Target": "Maps/ArchaeologyHouse",
			"FromFile": "assets/LumisteriaArchaeologyHouse_MapPatch.tmx",
			"FromArea": {
				"X": 12,
				"Y": 0,
				"Width": 1,
				"Height": 3
			},
			"ToArea": {
				"X": 37,
				"Y": 18,
				"Width": 1,
				"Height": 3
			},
		},
		//Mine PatchMode
		{
			"LogName": "Mine Path",
			"Action": "EditMap",
			"Target": "Maps/Mines/20",
			"FromFile": "assets/LumisteriaMtVapiusMinePatch.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 3,
				"Height": 3
			},
			"ToArea": {
				"X": 4,
				"Y": 13,
				"Width": 3,
				"Height": 3
			},
			"Update": "OnLocationChange",
			"When": {
				"query: {{DaysPlayed}} < 32": true
			}
		},
		{
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_Orchard",
			"MapProperties": {
				"CanBuildHere": "T",
				"LooserBuildRestrictions": "T",
				//"ForceAllowTreePlanting":  "T"
			},
			"When": {
				"HasSeenEvent: anyPlayer": "Lumisteria.MtVapius_Hamlet_OrchardUnlock"
			}
		},
		//Railroad+Trainstation temporary railsystem fix
		{
			"LogName": "Railroad Train Patch",
			"Action": "EditMap",
			"Target": "Maps/Railroad",
			"FromFile": "assets/LumisteriaRailroad_MapPatch2.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 1,
				"Height": 3
			},
			"ToArea": {
				"X": 31,
				"Y": 38,
				"Width": 1,
				"Height": 3
			},
		},
		/*{
			"LogName": "Hamlet Shortcut Patch",
			"Action": "EditMap",
			"Target": "Maps/Lumisteria.MtVapius_TrainStation",
			"FromFile": "assets/LumisteriaMtVapiusTrainStationPatch.tmx",
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 1,
				"Height": 3
			},
			"ToArea": {
				"X": 6,
				"Y": 32,
				"Width": 1,
				"Height": 3
			},
		},*/
		//Bus Warp Town to Train Station
		{
			"Action": "EditMap",
			"Target": "Maps/Town",
			"MapProperties": {
				"NPCWarp": "34 50 Lumisteria.MtVapius_TrainStation 6 32",
			},
		},
		//Bus Warp Town to Train Station, appending
		/*{
			"Action": "EditMap",
			"Target": "Maps/Town",
			
			"TextOperations": [
				{
					"Operation": "Append",
					"Target": ["MapProperties", "NPCWarp"],
					"Value": "34 50 Lumisteria.MtVapius_TrainStation 6 32",
					"Delimiter": " "
				},
			"When": {
				"HasMod |contains= FlashShifter.StardewValleyExpandedCP, Mod.B": true
			}
		},*/
		//Bus Warp to Hamlet
		/*{
            "Action": "EditMap",
            "Target": "Maps/Desert",
			
			"TextOperations": [
				{
					"Operation": "Append",
					"Target": ["MapProperties", "NPCWarp"],
					"Value": "32 30 Lumisteria.MtVapius_Hamlet 46 97",
					"Delimiter": " "
				}
			]
		},*/
        {
            "Action": "EditMap",
            "Target": "Maps/Lumisteria.MtVapius_NaveenHouse",
            "MapTiles": [
                {
                    "Position": { "X": 21, "Y": 24 },
                    "Layer": "Buildings",
                    "SetProperties": {
                        "Action": "spacechase0.SpaceCore_TriggerAction Lumisteria.MtVapius_LearnMangoBingsuRecipe"
                    }
                }
            ]
        },
	]
}